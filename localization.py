# localization.py

RU = {
    "lang_name": "Ğ ÑƒÑÑĞºĞ¸Ğ¹",
    "choose_lang": "ğŸŒ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ·Ñ‹Ğº / Choose a language / Escolha o idioma:",
    "lang_set": "Ğ¯Ğ·Ñ‹Ğº ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¸Ğ¹ ğŸ‡·ğŸ‡º",
    "start_message": (
        "ğŸ‰ Ğ’Ğ°Ñ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ <b>PortAway</b> â€” Ğ±Ğ¾Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ñ€Ğ°ÑÑÑ‹Ğ»ĞºĞ¸ ğŸ Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡ Ğ¸Ğ· <b>Portals</b> Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹!\n\n"
        "âš™ï¸ Ğ”Ğ»Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ² Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ /set"
    ),
    "set_filter_menu": "âš™ï¸ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°:\n\nğŸ”§ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ, ĞºĞ°ĞºĞ¾Ğ¹ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ: ",
    "choose_param": [
        ["ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ñ€Ğ¸Ğ·Ğ¾Ğ² ğŸ", "set_prizes_count"],
        ["Ğ¢Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ¾Ğ±ÑŠĞµĞ¼ ğŸ’µ", "set_min_volume"],
        ["Ğ‘ÑƒÑÑ‚ ĞºĞ°Ğ½Ğ°Ğ»Ğ° ğŸš€", "set_boost_filter"],
    ],
    "enter_prizes_count": "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ñ€Ğ¸Ğ·Ğ¾Ğ² Ğ² Ñ€Ğ¾Ğ·Ñ‹Ğ³Ñ€Ñ‹ÑˆĞµ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: 1):",
    "enter_min_volume": "Ğ’Ğ°Ñˆ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ¾Ğ±ÑŠĞµĞ¼",
    "boost_filter_ask": "ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑĞµ Ñ€Ğ¾Ğ·Ñ‹Ğ³Ñ€Ñ‹ÑˆĞ¸ Ğ¸Ğ»Ğ¸ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‚Ğµ, Ğ³Ğ´Ğµ Ğ½Ğµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ğ±ÑƒÑÑ‚?",
    "boost_all": "Ğ’ÑĞµ Ñ€Ğ¾Ğ·Ñ‹Ğ³Ñ€Ñ‹ÑˆĞ¸",
    "boost_no": "ĞĞµ Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‰Ğ¸Ğµ Ğ±ÑƒÑÑ‚Ğ°",
    "boost_filter_set_no": "Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ²Ñ‹ Ğ±ÑƒĞ´ĞµÑ‚Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ€Ğ¾Ğ·Ñ‹Ğ³Ñ€Ñ‹ÑˆĞ¸ Ğ±ĞµĞ· Ğ±ÑƒÑÑ‚Ğ°. âœ…",
    "boost_filter_set_all": "Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ²Ñ‹ Ğ±ÑƒĞ´ĞµÑ‚Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ Ğ²ÑĞµ Ñ€Ğ¾Ğ·Ñ‹Ğ³Ñ€Ñ‹ÑˆĞ¸ (Ğ¸ Ñ Ğ±ÑƒÑÑ‚Ğ¾Ğ¼, Ğ¸ Ğ±ĞµĞ·). ğŸ“¬",
    "please_enter_number": "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾.",
    "max_prizes": "ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¿Ñ€Ğ¸Ğ·Ğ¾Ğ² â€” 50. ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ½Ğµ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ 50.",
    "filter_saved": "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹! âœ…",
    "need_confirm": "ĞÑƒĞ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ ÑƒÑ‡Ğ°ÑÑ‚Ğ¸Ğµ\n",
    "id": "<b>ID:</b> <code>{id}</code>\n",
    "prizes": "<b>ĞŸÑ€Ğ¸Ğ·Ñ‹:</b> {prizes}\n",
    "require_premium": "<b>Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ¿Ñ€ĞµĞ¼Ğ¸ÑƒĞ¼:</b> {premium}\n",
    "require_boost": "<b>Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ boost:</b> {boost}\n",
    "min_volume": "<b>ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ğ±ÑŠĞµĞ¼:</b> {min_vol}",
    "confirm_participate": "ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ ÑƒÑ‡Ğ°ÑÑ‚Ğ¸Ğµ",
    "giveaway_link": "Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ñ€Ğ¾Ğ·Ñ‹Ğ³Ñ€Ñ‹Ñˆ",
    "confirmed": "ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¾!",
    "not_found": "ĞĞµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾",
    "error": "ĞÑˆĞ¸Ğ±ĞºĞ°: {err}",
    "join_giveaway": "<b>ĞŸÑ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½ÑĞ¹Ñ‚ĞµÑÑŒ Ğº Ñ€Ğ¾Ğ·Ñ‹Ğ³Ñ€Ñ‹ÑˆÑƒ!</b>\n\nğŸ† <b>ĞŸÑ€Ğ¸Ğ·Ñ‹:</b>\n{prizes}\n Ğ”Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ° {timeD}Ğ´ {timeH}Ñ‡ {timeM}Ğ¼Ğ¸Ğ½",
    "lang_ru": "ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹",
    "lang_en": "ğŸ‡¬ğŸ‡§ English",
    "lang_pt": "ğŸ‡§ğŸ‡· PortuguÃªs",
    "lang_set_success": "Ğ¯Ğ·Ñ‹Ğº ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ñ‘Ğ½!",
    "before_giveaway":"ĞŸÑ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğµ Ñ€Ğ¾Ğ·Ñ‹Ğ³Ñ€Ñ‹ÑˆĞ¸"
}

EN = {
    "lang_name": "English",
    "choose_lang": "ğŸŒ Choose a language / Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ·Ñ‹Ğº / Escolha o idioma:",
    "lang_set": "Language set to English ğŸ‡¬ğŸ‡§",
    "start_message": (
        "ğŸ‰ Welcome to <b>PortAway</b> â€” an automatic giveaway notifier bot for <b>Portals</b> with filters!\n\n"
        "âš™ï¸ Use /set to configure your filters"
    ),
    "set_filter_menu": "âš™ï¸Filter settings:\n\nğŸ”§ Choose a parameter to change: ",
    "choose_param": [
        ["Number of prizes ğŸ", "set_prizes_count"],
        ["Trading volume ğŸ’µ", "set_min_volume"],
        ["Channel boost ğŸš€", "set_boost_filter"],
    ],
    "enter_prizes_count": "Enter the minimum number of prizes in the giveaway (e.g.: 1):",
    "enter_min_volume": "Your trading volume",
    "boost_filter_ask": "Show all giveaways or only those not requiring boost?",
    "boost_all": "All giveaways",
    "boost_no": "No boost required",
    "boost_filter_set_no": "You will now only receive giveaways that do not require boost. âœ…",
    "boost_filter_set_all": "You will now receive all giveaways (with and without boost). ğŸ“¬",
    "please_enter_number": "Please enter a number.",
    "max_prizes": "The maximum number of prizes is 50. Please enter a number no greater than 50.",
    "filter_saved": "Filter settings saved! âœ…",
    "need_confirm": "Confirmation required\n",
    "id": "<b>ID:</b> <code>{id}</code>\n",
    "prizes": "<b>Prizes:</b> {prizes}\n",
    "require_premium": "<b>Premium required:</b> {premium}\n",
    "require_boost": "<b>Boost required:</b> {boost}\n",
    "min_volume": "<b>Minimum volume:</b> {min_vol}",
    "confirm_participate": "Confirm participation",
    "giveaway_link": "Giveaway link",
    "confirmed": "Confirmed!",
    "not_found": "Not found",
    "error": "Error: {err}",
    "join_giveaway": "<b>Join This Giveaway!</b>\n\nğŸ† <b>Prizes:</b>\n{prizes}\n{timeD}d {timeH}h {timeM}m left",
    "join_giveaway_ch": "<b>Join This giveaway!</b>\n\nğŸ† <b>Prizes:</b>\n{prizes}\n{timeD}d {timeH}h {timeM}m letft\nPremium required: {require_premium}\nBoost required: {require_premium}",
    "lang_ru": "ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹",
    "lang_en": "ğŸ‡¬ğŸ‡§ English",
    "lang_pt": "ğŸ‡§ğŸ‡· PortuguÃªs",
    "lang_set_success": "Language changed successfully!",
    "before_giveaway":"Previous giveaways"
}

PT = {
    "lang_name": "PortuguÃªs",
    "choose_lang": "ğŸŒ Escolha o idioma / Choose a language / Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ·Ñ‹Ğº:",
    "lang_set": "Idioma definido para portuguÃªs ğŸ‡§ğŸ‡·",
    "start_message": (
        "ğŸ‰ Bem-vindo ao <b>PortAway</b> â€” bot de notificaÃ§Ãµes automÃ¡ticas de sorteios do <b>Portals</b> com filtros!\n\n"
        "âš™ï¸ Use /set para configurar seus filtros"
    ),
    "set_filter_menu": "âš™ï¸ConfiguraÃ§Ã£o de filtro:\n\nğŸ”§ Escolha um parÃ¢metro para alterar: ",
    "choose_param": [
        ["Quantidade de prÃªmios ğŸ", "set_prizes_count"],
        ["Volume de negociaÃ§Ã£o ğŸ’µ", "set_min_volume"],
        ["Boost do canal ğŸš€", "set_boost_filter"],
    ],
    "enter_prizes_count": "Digite o nÃºmero mÃ­nimo de prÃªmios no sorteio (ex: 1):",
    "enter_min_volume": "Seu volume de negociaÃ§Ã£o",
    "boost_filter_ask": "Mostrar todos os sorteios ou apenas os que nÃ£o exigem boost?",
    "boost_all": "Todos sorteios",
    "boost_no": "Sem boost",
    "boost_filter_set_no": "Agora vocÃª sÃ³ receberÃ¡ sorteios que nÃ£o exigem boost. âœ…",
    "boost_filter_set_all": "Agora vocÃª receberÃ¡ todos os sorteios (com e sem boost). ğŸ“¬",
    "please_enter_number": "Por favor, digite um nÃºmero.",
    "max_prizes": "O nÃºmero mÃ¡ximo de prÃªmios Ã© 50. Por favor, insira um nÃºmero que nÃ£o seja maior que 50.",
    "filter_saved": "ConfiguraÃ§Ãµes de filtro salvas! âœ…",
    "need_confirm": "ConfirmaÃ§Ã£o necessÃ¡ria\n",
    "id": "<b>ID:</b> <code>{id}</code>\n",
    "prizes": "<b>PrÃªmios:</b> {prizes}\n",
    "require_premium": "<b>Premium necessÃ¡rio:</b> {premium}\n",
    "require_boost": "<b>Boost necessÃ¡rio:</b> {boost}\n",
    "min_volume": "<b>Volume mÃ­nimo:</b> {min_vol}",
    "confirm_participate": "Confirmar participaÃ§Ã£o",
    "giveaway_link": "Link do sorteio",
    "confirmed": "Confirmado!",
    "not_found": "NÃ£o encontrado",
    "error": "Erro: {err}",
    "join_giveaway": "<b>Participe do Sorteio!</b>\n\nğŸ† <b>PrÃªmios:</b>\n{prizes}\nFaltam {timeD}d {timeH}h {timeM}min",
    "lang_ru": "ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹",
    "lang_en": "ğŸ‡¬ğŸ‡§ English",
    "lang_pt": "ğŸ‡§ğŸ‡· PortuguÃªs",
    "lang_set_success": "Idioma alterado com sucesso!",
    "before_giveaway": "Sorteios passados"
}

LANGS = {
    "ru": RU,
    "en": EN,
    "pt": PT,
}

PHOTO_URLS = {
    "ru": "https://i.postimg.cc/xdqxqYGB/photo-2025-07-20-04-29-54.jpg",
    "en": "https://i.postimg.cc/FHTC91Sj/photo-2025-07-20-04-28-28.jpg",
    "pt": "https://i.postimg.cc/yYzbjMBS/photo-2025-07-20-04-28-37.jpg"
}

def get_locale(user, users=None):
    user_id = user.id if hasattr(user, "id") else user
    if users:
        for u in users:
            if u["id"] == user_id and "lang" in u:
                return LANGS.get(u["lang"], EN)
    lang_code = getattr(user, "language_code", "en")
    if lang_code.startswith("en"):
        return EN
    if lang_code.startswith("pt"):
        return PT
    return EN

def get_lang_code(user, users=None):
    user_id = user.id if hasattr(user, "id") else user
    if users:
        for u in users:
            if u["id"] == user_id and "lang" in u:
                return u["lang"]
    lang_code = getattr(user, "language_code", "en")
    if lang_code.startswith("en"):
        return "en"
    if lang_code.startswith("pt"):
        return "pt"
    return "en"

def langs_keyboard():
    from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
    return InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(text=RU["lang_ru"], callback_data="lang_ru"),
                InlineKeyboardButton(text=EN["lang_en"], callback_data="lang_en"),
                InlineKeyboardButton(text=PT["lang_pt"], callback_data="lang_pt"),
            ]
        ]
    )